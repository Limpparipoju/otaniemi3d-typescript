<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">

<link rel="import" href="../manga-card/manga-card.html">

<dom-module id="manga-browser">
  <template>

    <style>
      .spinner {
        @apply(--layout);
        @apply(--layout-center-center);
        height: 70vh;
      }
    </style>

    <iron-ajax url="../../assets/data/manga-list.json" handle-as="json"
        last-response="{{data}}"
        on-response="_mangaLoaded"
        auto>
    </iron-ajax>

    <paper-drawer-panel force-narrow>

      <paper-header-panel drawer fixed>
        <paper-toolbar>
          <div class="title">Drawer</div>
        </paper-toolbar>
        <div>Drawer content</div>
      </paper-header-panel>

      <paper-header-panel main condenses mode="waterfall">

        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle>
          </paper-icon-button>
          <span class="flex"></span>
          <paper-icon-button icon="search" on-tap="search">
          </paper-icon-button>
          <div class="bottom title">Title</div>
        </paper-toolbar>

        <div class="spinner" hidden$="[[!_loadingManga]]">
          <paper-spinner alt="Loading manga list"
              active="[[_loadingManga]]">
          </paper-spinner>
        </div>

        <iron-list class="fit" items="[[_mangaList]]" as="manga">
          <template>
            <a href$="[[_getMangaUrl(manga)]]">
              <manga-card manga="[[manga]]"></manga-card>
            </a>
          </template>
        </iron-list>

      </paper-header-panel>

    </paper-drawer-panel>

  </template>
</dom-module>

<script src="manga-browser.js"></script>
